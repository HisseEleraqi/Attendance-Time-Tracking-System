@model IEnumerable<Attendence>
@{
    Layout = null;
    var ID = ViewBag.ID;
}

<!DOCTYPE html>

<html>
<head class="">
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap.css" />



</head>
<body>

    <script src="/lib/jquery/dist/jquery.min.js"></script>
    <div class="container mt-5">
        <h1>Search For Track Here</h1>

        <input type="text" id="searchInput" onkeyup="filterTable()" placeholder="Enter department name..." class="form-control form-control-lg mr-sm-2 ">
        <form method="post" action="@Url.Action("ExportToExcel", "Admin", new { ID = ID })">
            <button type="submit" class="btn btn-success" style="margin-top:20px;">Export to Excel</button>
        </form>
    </div>
    <table id="departmentTable" class="table table-bordered table-hover m-3">
        <thead>
        <th>Date</th>
        <th>InTime</th>
        <th>OutTime</th>
        <th>UserName</th>
        </thead>
        <tbody>
            @if (Model.Count() == 0)
            {
                <tr>
                    <td colspan="4">NO Tracks Exists</td>
                </tr>
            }
            else
            {
                foreach (var item in Model)
                {
                    <tr>
                        <td>@item.Date</td>
                        <td>@item.InTime</td>
                        <td>@item.OutTime</td>
                        <td>@item.User?.Name</td>


                    </tr>
                }
            }

        </tbody>


    </table>




    <script>
        function filterTable() {
            // Declare variables
            var input, filter, table, tr, td, i, txtValue;
            input = document.getElementById("searchInput");
            filter = input.value.toUpperCase();
            table = document.getElementById("departmentTable");
            tr = table.getElementsByTagName("tr");

            // Loop through all table rows, and hide those who don't match the search query
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[1]; // Assuming second column contains student names
                if (td) {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                    } else {
                        tr[i].style.display = "none";
                    }
                }
            }
        }
    </script>



    @* <a href="/department/Create" class="btn btn-info">Add Department </a> *@

    @*<a class="btn btn-info m-3" asp-action="Create" asp-controller="department">Add Department</a>

    <br />

    <div id="data">

    </div>*@
    @* <script src="/lib/jquery/dist/jquery.min.js"> </script>


    <script>

    Function ShowData(id){
    $("#data").load("/department/detailsAjax/ " + id)
    }

    </script> *@
    
</body>
</html>
